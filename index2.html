<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Music Player — Snowbreeze</title>
<style>
:root{
  --topbar-h:56px;
  --sidebar-w:250px;
  --panel-w:720px;
  --panel-padding:40px;
  --panel-bg: rgba(10,10,10,0.55);
  --control-bg: rgba(0,0,0,0.75);
  --muted-text: #d0d0d0;
  --accent: #ff9f1c;
}
*{box-sizing:border-box;margin:0;padding:0}
html,body{
  width:100%;
  height:100%;
  font-family: "Helvetica Neue", Arial, system-ui, sans-serif;
  background-image:url('snow.jpg');
  background-size:cover;
  background-position:center;
  background-repeat:no-repeat;
  color:#fff;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}
/* keep the dark overlay but not fixed background attachment */
body::before{
  content:"";
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.65);
  z-index:0;
  pointer-events:none;
}

/* top bar */
.top-bar{
  position:fixed;
  top:0;left:0;
  height:var(--topbar-h);
  width:100%;
  display:flex;
  justify-content:flex-end;
  align-items:center;
  padding:8px 20px;
  z-index:1001;
  background:rgba(0,0,0,0.45);
}
.menu-btn{
  background:#fff;color:#000;border:0;padding:8px 14px;border-radius:6px;cursor:pointer;font-weight:600;
}

/* sidebar */
.sidebar{
  position:fixed; top:0; right: calc(-1*var(--sidebar-w));
  width:var(--sidebar-w); height:100%;
  padding:calc(var(--topbar-h)+12px) 16px 18px;
  background:rgba(0,0,0,0.8);
  box-shadow:-3px 0 6px rgba(0,0,0,0.5);
  z-index:1000;
  transition:right .28s ease;
}
body.sidebar-open .sidebar{ right:0 }

/* stage */
.app-stage{
  position:relative;
  width:100%;
  height:100vh;
  z-index:1;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:calc(var(--topbar-h) + 20px) 20px;
}

/* panel */
#draggableDiv{
  width:var(--panel-w);
  max-width:calc(100% - 40px);
  border-radius:18px;
  background:var(--panel-bg);
  backdrop-filter:blur(8px);
  padding:var(--panel-padding);
  box-shadow:0 20px 60px rgba(0,0,0,0.6);
  z-index:10;
  position:relative;
  cursor:grab;
  user-select:none;
}

/* content */
.music-box{
  width:100%;
  margin:0 auto;
  text-align:center;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:12px;
}
.music-box h2{
  font-size:28px;
  font-weight:700;
  margin-bottom:6px;
}
.track-info{
  color:var(--muted-text);
  font-size:15px;
  max-width:90%;
  text-wrap:balance;
}

/* audio wrapper & ensure progress is wide and visible */
.audio-wrap{
  width:100%;
  display:flex;
  justify-content:center;
  align-items:center;
  margin-top:6px;
  z-index:6;
  position:relative;
}
audio{
  width:100%;
  max-width:100%;
  outline:none;
  border-radius:10px;
  background:transparent;
  display:block;
}

/* controls */
.controls{
  display:flex;
  gap:18px;
  margin-top:18px;
  align-items:center;
  justify-content:center;
}
.ctrl-btn{
  width:56px;height:56px;border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  background:var(--control-bg);border:0;color:#fff;font-size:20px;
  box-shadow:0 6px 18px rgba(0,0,0,0.5);cursor:pointer;
}
.ctrl-btn:active{ transform:translateY(1px); }

.play-toggle{
  min-width:68px;height:44px;border-radius:8px;background:var(--control-bg);color:#fff;border:0;font-weight:800;
  display:flex;align-items:center;justify-content:center;padding:6px 12px;gap:8px; font-size:16px;
  box-shadow:0 6px 18px rgba(0,0,0,0.5); cursor:pointer;
}

/* control visuals for accessibility */
.ctrl-btn[title]{ outline: none; }
.play-toggle[title]{ outline: none; }

/* desktop centered draggable default */
@media(min-width:921px){
  #draggableDiv{
    position:absolute;
    left:50%;
    top:50%;
    transform:translate(-50%,-50%);
    cursor:grab;
  }
}

/* mobile: allow horizontal scrolling and keep audio wide */
@media(max-width:920px){
  :root{ --panel-w:720px }
  body{ overflow-x:auto; overflow-y:auto; }
  .app-stage{ align-items:flex-start; padding:calc(var(--topbar-h)+12px) 12px 60px; min-height:100vh; }
  #draggableDiv{
    position:relative;
    left:50%;
    transform:translateX(-50%);
    margin:18px auto;
    width:var(--panel-w);
    padding:28px;
    cursor:default;
  }
  audio{ width:120%; margin-left:-10%; }
}

/* very small screens - widen progress more if needed */
@media(max-width:420px){
  #draggableDiv{ width:720px; padding:22px; border-radius:16px; }
  audio{ width:140%; margin-left:-20%; }
}
</style>
</head>
<body>
  <div class="top-bar">
    <button class="menu-btn" onclick="document.body.classList.toggle('sidebar-open')">☰ Menu</button>
  </div>

  <div class="sidebar" aria-hidden="true">
    <h2>Pages</h2>
    <ul style="list-style:none;padding:0;margin-top:8px">
      <li><a href="index.html" style="color:#fff;text-decoration:none">Introduction</a></li>
      <li style="margin-top:8px"><a href="#" style="color:#fff;text-decoration:underline;font-weight:700">Music Player</a></li>
    </ul>
  </div>

  <main class="app-stage">
    <section id="draggableDiv" aria-label="music panel">
      <div class="music-box">
        <h2>My top 5 songs</h2>
        <div class="track-info" id="trackInfo">Track 1: Nope your too late i already died</div>

        <div class="audio-wrap">
          <audio id="audioPlayer" src="nope.mp3" controls preload="metadata"></audio>
        </div>

        <div class="controls" aria-hidden="false">
          <button class="ctrl-btn" id="prevBtn" title="Previous">⏮</button>
          <button class="play-toggle" id="playBtn" title="Play / Pause">▶</button>
          <button class="ctrl-btn" id="nextBtn" title="Next">⏭</button>
        </div>
      </div>
    </section>
  </main>

<script>
(function(){
  const audio = document.getElementById('audioPlayer');
  const playBtn = document.getElementById('playBtn');
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');
  const trackInfo = document.getElementById('trackInfo');
  const panel = document.getElementById('draggableDiv');

  const tracks = [
    {title:"Track 1: Nope your too late i already died", file:"nope.mp3"},
    {title:"Track 2: A stranger I remain", file:"stranger.mp3"},
    {title:"Track 3: Run to the Edge", file:"Run.mp3"},
    {title:"Track 4: Re:Re", file:"rere.mp3"},
    {title:"Track 5: New Horizons", file:"newh.mp3"}
  ];
  let current = 0;
  function load(idx, autoplay=false){
    current = idx;
    audio.src = tracks[current].file;
    trackInfo.textContent = tracks[current].title;
    if(autoplay) audio.play().catch(()=>{});
    updatePlayBtn();
  }
  nextBtn.addEventListener('click', ()=> load((current+1)%tracks.length,true));
  prevBtn.addEventListener('click', ()=> load((current-1+tracks.length)%tracks.length,true));
  audio.addEventListener('ended', ()=> load((current+1)%tracks.length,true));
  playBtn.addEventListener('click', ()=>{
    if(audio.paused) audio.play(); else audio.pause();
    updatePlayBtn();
  });
  audio.addEventListener('play', updatePlayBtn);
  audio.addEventListener('pause', updatePlayBtn);
  function updatePlayBtn(){
    playBtn.textContent = audio.paused ? "▶" : "⏸";
  }
  load(0,false);

  function isMobile(){ return window.matchMedia("(max-width:920px)").matches; }

  /* draggable on desktop only - pointer events */
  let dragging=false, startX=0, startY=0, startLeft=0, startTop=0;
  panel.addEventListener('pointerdown', (e)=>{
    if(isMobile()) return;
    if(e.target.closest('button, audio, input, a')) return;
    dragging=true;
    panel.setPointerCapture?.(e.pointerId);
    panel.style.transition = "none";
    startX = e.clientX; startY = e.clientY;
    const rect = panel.getBoundingClientRect();
    startLeft = rect.left; startTop = rect.top;
    document.body.style.userSelect = "none";
  });
  window.addEventListener('pointermove', (e)=>{
    if(!dragging) return;
    const dx = e.clientX - startX;
    const dy = e.clientY - startY;
    panel.style.left = (startLeft + dx) + "px";
    panel.style.top = (startTop + dy) + "px";
    panel.style.transform = "none";
    panel.style.position = "absolute";
  });
  window.addEventListener('pointerup', (e)=>{
    if(!dragging) return;
    dragging=false;
    panel.releasePointerCapture?.();
    document.body.style.userSelect = "";
    panel.style.transition = "";
  });

  window.addEventListener('resize', ()=>{
    if(!isMobile()){
      panel.style.left = "";
      panel.style.top = "";
      panel.style.position = "absolute";
      panel.style.transform = "translate(-50%,-50%)";
      panel.style.left = "50%";
      panel.style.top = "50%";
    } else {
      panel.style.left = "50%";
      panel.style.top = "";
      panel.style.transform = "translateX(-50%)";
      panel.style.position = "relative";
    }
  });

  setTimeout(()=>{ window.dispatchEvent(new Event('resize')); },30);
})();
</script>
</body>
</html>
